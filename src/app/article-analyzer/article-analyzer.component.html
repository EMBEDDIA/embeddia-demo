<div class="container">
  <div class="sidebar">
    <form #analyzerForm="ngForm" (ngSubmit)="submitForm()" class="mw" nz-form nzLayout="vertical">
      <nz-form-control nzErrorTip="This field is required">
        <nz-form-label nzRequired>Analyzer</nz-form-label>
        <nz-select
          [(ngModel)]="selectedAnalyzers"
          [nzMaxTagCount]="1"
          class="mw"
          name="selectedAnalyzer"
          nzMode="multiple"
          required>
          <nz-option *ngFor="let item of analyzerOptions" [nzLabel]="item.display_name"
                     [nzValue]="item.value"></nz-option>
        </nz-select>
      </nz-form-control>
      <nz-form-item>

        <nz-form-label nzRequired>Text</nz-form-label>
        <nz-form-control nzErrorTip="This field is required">
            <textarea [(ngModel)]="text" name="text" nz-input placeholder="Text to analyze"
                      required
                      rows="22"></textarea>

        </nz-form-control>
      </nz-form-item>

      <button [disabled]="!analyzerForm.form.valid" [nzLoading]="isLoading" class="mw" nz-button nzType="primary">
        Analyze
      </button>
    </form>
  </div>
  <div class="content">
    <nz-spin *ngIf="isLoading" [nzSize]="'large'" [nzSpinning]="isLoading" nzSimple></nz-spin>
    <ng-container *ngIf="resultSource?.length > 0 && !this.isLoading">
      <div class="legend">
        <div>
          <nz-tag *ngFor="let color of COLORKEYS" [nzColor]="COLORS[color]">{{color}}
          </nz-tag>
        </div>
      </div>
      <div class="container">
        <div class="flex-col">
          <nz-radio-group [(ngModel)]="radioValue" nzButtonStyle="solid">
            <label nz-radio-button nzValue="Tags">Tags</label>
            <label nz-radio-button nzValue="Text">Text</label>
          </nz-radio-group>
          <span class="lang">Language: {{language}}</span>
        </div>
        <div [hidden]="radioValue !== 'Tags'">
          <div *ngFor="let key of resultSource" class="flex-col">
            <h1>{{key}}</h1>
            <div class="tag-wrapper flex-row">
              <ng-container *ngFor="let item of results[key]">
                <nz-tag *ngIf="item.tag" nz-tooltip nzColor="{{COLORS['KEYWORD']}}"
                        nzTooltipTitle="KEYWORD">{{item.tag}}
                </nz-tag>
                <nz-tag *ngIf="item.type && item.entity" [nzColor]="COLORS[item.type]" [nzTooltipTitle]="item.type"
                        nz-tooltip>{{item.entity}}
                </nz-tag>
              </ng-container>
            </div>
          </div>
        </div>
        <div [hidden]="radioValue !== 'Text'">
          <app-highlight
            [highlightConfig]="{currentColumn: 'text', searcherHighlight: resultTextData.highlight, highlightTextaFacts: true, data: resultTextData}"></app-highlight>
        </div>
      </div>
    </ng-container>
  </div>
</div>
